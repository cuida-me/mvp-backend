syntax = "proto3";

package pb;

option go_package = "internal/infrastructure/pb";

import "proto/utils.proto";

message Patient {
  uint64 id = 1;
  string name = 2;
  pb.Date birthdate = 3;
  string avatar = 4;
  pb.Sex sex = 5;
  string status = 6;
}

message CreatePatientRequest {
  string name = 1;
  pb.Date birthdate = 2;
  optional string avatar = 3;
  pb.Sex sex = 4;
}

message NewPatientSessionRequest {
  string ip = 1;
  string device_id = 2;
}

message LogoutPatientRequest {

}

message Session {

}

message GetHelpRequest {

}

message FindPatientByIDRequest {
  uint64 id = 1;
}

message UpdatePatientRequest {
  uint64 patient_id = 1;
  string name = 2;
  pb.Date birthdate = 3;
  string avatar = 4;
  pb.Sex sex = 5;
}

message DeletePatientRequest {
  uint64 id = 1;
}

service PatientService {
  rpc Create(CreatePatientRequest) returns (Patient);
  rpc FindById(FindPatientByIDRequest) returns (Patient);
  rpc Update(UpdatePatientRequest) returns (pb.Blank);
  rpc Delete(DeletePatientRequest) returns (pb.Blank);
  rpc NewSession(NewPatientSessionRequest) returns (stream Session);
  rpc Logout(LogoutPatientRequest) returns (pb.Blank);
  rpc GetHelp(GetHelpRequest) returns (pb.Blank);
}